<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://alienzj.github.io/rss.xml"
      title="RSS feed for https://alienzj.github.io/"/>
<title>concurrent</title>
<meta name="author" content="Jie Zhu">
<meta name="referrer" content="no-referrer">
<link href= "styles/style.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="images/org_logo.png"></head>
<body>
<div id="preamble" class="status">
<div class="header">
  <a href="https://alienzj.github.io/" class="logo">ZJ Org Blog</a>
  <br>
    <a href="https://alienzj.github.io/archive">Archive</a>
    <a href="https://alienzj.github.io/tags">Tags</a>
    <a href="https://alienzj.github.io/rss.xml">RSS</a>
    <a href="https://alienzj.github.io/about">About</a>
</div></div>
<div id="content">
<div class="post-date">10 Sep 2020</div><h1 class="post-title"><a href="https://alienzj.github.io/2020-09-10-concurrent.html">concurrent</a></h1>
<p>
Today, I learn python concurrent from <a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p08_perform_simple_parallel_programming.html">python3 cookbook</a>.
</p>

<p>
Bellow is some exampels for using concurrent.
</p>

<div id="outline-container-orgced86d0" class="outline-2">
<h2 id="orgced86d0">submit</h2>
<div class="outline-text-2" id="text-orgced86d0">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffff870554a1;">import</span> <span style="color: #0000d03ddd20;">concurrent</span>.<span style="color: #0000cfe9ae05;">futures</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Some function</span>
<span style="color: #ffff770b7bed;">do</span> = [[<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>], [<span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>]]

<span style="color: #8664c22937f5;">def</span> <span style="color: #0000c45effff;">work</span>(<span style="color: #ffff86fb54b6;">x</span>):
    <span style="color: #ffff82af5dc2;">print</span>(<span style="color: #ffff7a91e24a;">f</span><span style="color: #98be65;">"x: {x}"</span>)
    <span style="color: #0000cfe6e89b;">return</span> <span style="color: #ffff86fb54b6;">x</span>

<span style="color: #ffff70d2ba7d;">with</span> <span style="color: #0000d03ddd20;">concurrent</span>.<span style="color: #0000cfe9ae05;">futures</span>.<span style="color: #a254bc8624e4;">ProcessPoolExecutor</span>() <span style="color: #0000cdc3ffff;">as</span> <span style="color: #9a47a4cdffff;">pool</span>:
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Example of submitting work to the pool</span>
    <span style="color: #0170b47affff;">future_result</span> = <span style="color: #9a47a4cdffff;">pool</span>.<span style="color: #e9338c58ffff;">submit</span>(<span style="color: #0000c45effff;">work</span>, <span style="color: #ffff770b7bed;">do</span>)

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Obtaining the result (blocks until done)</span>
    <span style="color: #17f9b40cffff;">r</span> = <span style="color: #0170b47affff;">future_result</span>.<span style="color: #6d33c5d04881;">result</span>()
    <span style="color: #ffff82af5dc2;">print</span>(<span style="color: #ffff7a91e24a;">f</span><span style="color: #98be65;">"r: {r}"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org14b46a2" class="outline-2">
<h2 id="org14b46a2">map</h2>
<div class="outline-text-2" id="text-org14b46a2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffff70d2ba7d;">with</span> <span style="color: #0000d03ddd20;">concurrent</span>.<span style="color: #0000cfe9ae05;">futures</span>.<span style="color: #a254bc8624e4;">ProcessPoolExecutor</span>() <span style="color: #0000cdc3ffff;">as</span> <span style="color: #9a47a4cdffff;">pool</span>:
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Example of submitting work to the pool</span>
    <span style="color: #0170b47affff;">future_result</span> = []
    <span style="color: #0000c9ceffff;">for</span> <span style="color: #c8f2b1581317;">i</span> <span style="color: #c9ddb105130d;">in</span> <span style="color: #9a47a4cdffff;">pool</span>.<span style="color: #c678dd;">map</span>(<span style="color: #0000c45effff;">work</span>, <span style="color: #ffff770b7bed;">do</span>):
        <span style="color: #0170b47affff;">future_result</span>.<span style="color: #0000bcf9ffff;">append</span>(<span style="color: #c8f2b1581317;">i</span>)

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Obtaining the result (blocks until done)</span>
    <span style="color: #ffff82af5dc2;">print</span>(<span style="color: #ffff7a91e24a;">f</span><span style="color: #98be65;">"r: {future_result}"</span>)
</pre>
</div>
</div>
</div>
<div class="taglist"><a href="https://alienzj.github.io/tags.html">Tags</a>: <a href="https://alienzj.github.io/tag-concurrent.html">concurrent</a> </div></div>
<div id="postamble" class="status"><center> <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"> <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"/> </a> <br /> <span xmlns:dct="https://purl.org/dc/terms/" href="https://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type"> <em>ZJ Org Blog</em> </span> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://alienzj.github.io" property="cc:attributionName" rel="cc:attributionURL"> Jie Zhu </a> is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"> Creative Commons Attribution-ShareAlike 3.0 Unported License</a></center><div id="disqus_thread"></div><script>/*** RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*//*var disqus_config = function () {this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variablethis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable};*/(function() { // DON'T EDIT BELOW THIS LINEvar d = document, s = d.createElement('script');s.src = 'https://https-alienzj-github-io.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
</body>
</html>
